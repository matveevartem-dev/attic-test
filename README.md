# Введение  
- [Текст задания](task.txt)  
- Задание выполнено с расчётом для быстрого запуска в docker, что бы можно было увидеть результат в работе.  
- Большинство значений для гипотетически изменяемых значений вынесены в ``.env`` файл. Сам ***.env*** файл не стал убирать из репозитория, т.к. это всё таки тестовое задание.  

# Задачи

- [SQL файл для создания базы данных](sql_database_create_tables.sql)  
- Backend: ***PHP 8.4.10***, ***MySQL 8.4.6***  
- Frontend: ***Vue 3.5.17***  
- Console: Загрузка постов и комментариев выполняется при [первом запуске](#title1) или при выполнении [команды импорта](#title6).  
  Основной файл импорта данных ****src/Infrastructure/Console/Command/ImportCommand.php****
- Swagger: ***swaggerUI 5.27.0***

# Описание

- Приложение по умолчанию запускается на следующих адресах/портах  
  - **Web Application** - http://localhost:8088
  - **Swagger** - http://localhost:8090
- В папке ``inline-test`` находится само приложение и все необходимые файлы.  
Эта папка является основной рабочей директорией приложения.
- В папке ``inline-test/docker`` находится ``docker-compose-yml`` и все файлы, нужные для запуска **docker** контейнеров.
- В папке ``inline-test/vue`` находится ``VueJS`` приложение.  
  Чтобы избежать отдельного контейнера для frontend, была выполнена сборка ***(cd vue && npm run build)***,  
  и все необходимые файлы из каталога ***vue/dist*** скопированы в ***public/assets*** и ***resource/View***

# Требования
- Unix подобные системы, Linux, MacOS, UNIX-подобные системы или Windows 10/11 с установленным WSL.  
- Bash
- Установленный docker
- Установленный docker-compose

# Установка

### Скачайте приложение
```
$ git clone https://github.com/matveevartem-dev/attic-test.git inline-test
$ cd inline-test
```
При желании можете отредактировать файл **.env**
```
$ nano ./.env
```

# Запуск

### <a id="title1">Первый запуск</a>
  ```
  $ ./app.sh init
  ```

Будут собраны и запущены все контейнеры, создана база данных, применены миграции и установленны все зависимости.  
Может занять несколько минут.  

Если во время выполнения команды возникнет **Uncaught PDOException**, то тогда, после неё, нужно будет выполнить  
  [./app.sh migrate](#title5)  
  [./app.sh import](#title6)

### <a id="title2">Последующе запуски</a>
  ```
  $ ./app.sh start
  ```
### <a id="title3">Остановка приложения</a>
  ```
  $ ./app.sh stop
  ```
### <a id="title4">Обновление зависимостей у запущенного приложения</a>
  ```
  $ ./app.sh require
  ```
### <a id="title5">Применение миграций у запущенного приложения (создание базы данных и добавление фиктивных пользователей) <small>***([выполняется при первом запуске](#title1))***</small></a>
  ```
  $ ./app.sh migrate
  ```
### <a id="title6">Загрузка постов и комментариев <small>***([выполняется при первом запуске](#title1))***</small></a>
  ```
  $ ./app.sh import
  ```

### <a id="title7">Просмотр состояния контейнеров приложения</a>
  ```
  $ ./app.sh status
  ```
